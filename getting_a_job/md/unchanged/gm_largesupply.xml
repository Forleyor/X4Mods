<?xml version="1.0" encoding="utf-8"?>
<diff>
	<replace  sel="//library[@name='Start']/params/param[@name='OfferDistance']/@default">350km</replace>

<!-- kuertee: RAP -->
<!--
	<library name="GenerateTextTable">
		<actions>
-->
	<add pos="prepend" sel="//library[@name=&quot;GenerateTextTable&quot;]/actions">
		<include_actions ref="md.kuertee_professions_guilds.GuildMissionContainer_Description" />
	</add>
<!-- ADD:
	<library name="Start">
		<params>
-->
	<add sel="//library[@name=&quot;Start&quot;]/params">
		<param name="MissionGroup" default="null" />
	</add>
<!-- ADD property group:
	<create_offer cue="$MissionCue" ... >
-->
	<add sel="//create_offer[@cue=&quot;$MissionCue&quot;]" type="@group">$MissionGroup</add>
<!--
	<signal_cue_instantly cue="md.GenericMissions.GenericAcceptLogbookEntry" param="[$TextTable.$missionname, $Client, $ClientOwner]"/>
-->
	<add pos="after" sel="//signal_cue_instantly[@cue=&quot;md.GenericMissions.GenericAcceptLogbookEntry&quot;]">
		<set_value name="$DebugChance" exact="md.kuertee_professions_guilds.UserSettings.$debugChance3" />
		<set_value name="namespace.$kProfs_timeStart" exact="player.age" />
	</add>
<!--
	<cue name="MissionEnded">
		<set_value name="stat.missions_completed" operation="add"/>
-->
	<add pos="after" sel="//cue[@name=&quot;MissionEnded&quot;]//set_value[@name=&quot;stat.missions_completed&quot;][@operation=&quot;add&quot;]">
		<set_value name="namespace.$kProfs_isSuccess" exact="true" />
		<set_value name="namespace.$kProfs_rewardCr" exact="$RewardCr" />
		<set_value name="namespace.$kProfs_rewardObj" exact="$RewardObj" />
	</add>
<!--
	<cue name="CleanUp">
		<actions>
-->
	<add pos="prepend" sel="//cue[@name=&quot;CleanUp&quot;]/actions">
		<do_if value="@namespace.$kProfs_timeStart">
			<set_value name="$profRepu" exact="md.kuertee_professions.kProfs.$prof_Trader" />
			<set_value name="$count_minableWares" exact="0" />
			<debug_text text="'$StationSupply: ' + $StationSupply" chance="md.kuertee_professions.UserSettings.$debugChance" />
			<do_for_each name="$Supply" in="$StationSupply">
				<debug_text text="'$Supply: ' + $Supply" chance="md.kuertee_professions.UserSettings.$debugChance" />
				<do_if value="$Supply.$ware.hastag.mineable">
					<set_value name="$count_minableWares" operation="add" exact="1" />
				</do_if>
			</do_for_each>
			<debug_text text="'$count_minableWares: ' + $count_minableWares" chance="md.kuertee_professions.UserSettings.$debugChance" />
			<do_if value="$count_minableWares == $StationSupply.count">
				<set_value name="$profRepu" exact="md.kuertee_professions.kProfs.$prof_Miner" />
			</do_if>
			<signal_cue_instantly cue="md.kuertee_professions.GMMissionEnd" param="table[
				$profRepu = $profRepu,
				$activityId = if @namespace.$kProfs_isSuccess then md.kuertee_professions.kProfs.$activity_full_mission_success else md.kuertee_professions.kProfs.$activity_full_mission_failure,
				$missionLib = namespace,
				$rewardCr = @namespace.$kProfs_rewardCr,
				$rewardObj = @namespace.$kProfs_rewardObj
			]" />
		</do_if>
	</add>
</diff>
