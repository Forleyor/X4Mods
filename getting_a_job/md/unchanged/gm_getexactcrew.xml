<?xml version="1.0" encoding="utf-8"?>
<diff>
	<replace  sel="//library[@name='Start']/params/param[@name='OfferDistance']/@default">350km</replace>

<!-- kuertee: RAP -->
<!--
	<library name="GenerateTextTable">
		<actions>
-->
	<add pos="prepend" sel="//library[@name=&quot;GenerateTextTable&quot;]/actions">
		<include_actions ref="md.kuertee_professions_guilds.GuildMissionContainer_Description" />
	</add>
<!-- ADD:
	<library name="Start">
		<params>
-->
	<add sel="//library[@name=&quot;Start&quot;]/params">
		<param name="MissionGroup" default="null" />
	</add>
<!-- ADD prepend:
	<library name="Start">
		<actions>
-->
	<!-- <add pos="prepend" sel="//library[@name=&quot;Start&quot;]/actions">
		<debug_text text="'namespace: ' + namespace" />
		<debug_text text="'$OfferObject: ' + $OfferObject" />
		<debug_text text="'$Client: ' + $Client" />
		<debug_text text="'$ClientOwner: ' + $ClientOwner" />
		<debug_text text="'$MissionCue: ' + $MissionCue" />
		<debug_text text="'$WithoutOffer: ' + $WithoutOffer" />
		<debug_text text="'$MissionGroup: ' + $MissionGroup" />
	</add> -->
<!-- ADD:
	<library name="Start">
		<actions>
			<do_if value="not $WithoutOffer">
-->
	<!-- <add sel="//library[@name=&quot;Start&quot;]/actions/do_if[@value=&quot;not $WithoutOffer&quot;]">
		<debug_text text="'$OfferType: ' + @$OfferType" />
		<debug_text text="'$Feedback: ' + @$Feedback" />
	</add> -->
<!-- ADD:
	<cue name="With_Offer" onfail="cancel">
-->
	<!-- <add sel="//cue[@name=&quot;With_Offer&quot;]">
		<actions>
			<debug_text text="''" />
		</actions>
	</add> -->
<!-- ADD:
	<cue name="With_Offer" onfail="cancel">
		<cues>
-->
	<!-- <add sel="//cue[@name=&quot;With_Offer&quot;]/cues">
		<cue name="Offer_Management_Test">
			<actions>
				<debug_text text="Offer_Management" />
			</actions>
		</cue>
	</add> -->
<!-- ADD
	<cue name="CreateOffer" instantiate="true" comment="instanced to prevent cleanup">
		<actions>
			<do_if value="not @$OfferCreated">
-->
	<!-- <add sel="//cue[@name=&quot;CreateOffer&quot;]//do_if[@value=&quot;not @$OfferCreated&quot;]">
		<debug_text text="'$MissionCue: ' + $MissionCue" />
		<debug_text text="'$MissionCue.hasmissionoffer: ' + $MissionCue.hasmissionoffer" />
	</add> -->
<!-- ADD property group:
	<create_offer cue="$MissionCue" ... >
-->
	<add sel="//create_offer[@cue=&quot;$MissionCue&quot;]" type="@group">$MissionGroup</add>
<!--
	<signal_cue_instantly cue="md.GenericMissions.GenericAcceptLogbookEntry" param="[$TextTable.$missionname, $Client, $ClientOwner]"/>
-->
	<add pos="after" sel="//signal_cue_instantly[@cue=&quot;md.GenericMissions.GenericAcceptLogbookEntry&quot;]">
		<set_value name="$DebugChance" exact="md.kuertee_professions_guilds.UserSettings.$debugChance3" />
		<set_value name="namespace.$kProfs_timeStart" exact="player.age" />
	</add>
<!--
	<cue name="MissionEnded">
		<set_value name="stat.missions_completed" operation="add"/>
-->
	<add pos="after" sel="//cue[@name=&quot;MissionEnded&quot;]//set_value[@name=&quot;stat.missions_completed&quot;][@operation=&quot;add&quot;]">
		<set_value name="namespace.$kProfs_isSuccess" exact="true" />
		<set_value name="namespace.$kProfs_rewardCr" exact="$RewardCr" />
		<set_value name="namespace.$kProfs_rewardObj" exact="$RewardObj" />
	</add>
<!--
	<cue name="CleanUp">
		<actions>
-->
	<add pos="prepend" sel="//cue[@name=&quot;CleanUp&quot;]/actions">
		<do_if value="@namespace.$kProfs_timeStart">
			<signal_cue_instantly cue="md.kuertee_professions.GMMissionEnd" param="table[
				$profRepu = md.kuertee_professions.kProfs.$prof_Courier,
				$activityId = if @namespace.$kProfs_isSuccess then md.kuertee_professions.kProfs.$activity_full_mission_success else md.kuertee_professions.kProfs.$activity_full_mission_failure,
				$missionLib = namespace,
				$rewardCr = @namespace.$kProfs_rewardCr,
				$rewardObj = @namespace.$kProfs_rewardObj
			]" />
		</do_if>
	</add>
</diff>
